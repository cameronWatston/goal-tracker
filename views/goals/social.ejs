<!-- Social Feed Page -->
<div class="container-fluid">
    <!-- Header Section -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-body p-4">
                    <div class="d-flex align-items-center">
                        <div>
                            <h2 class="mb-1">Goal Community</h2>
                            <p class="text-muted mb-0">Share your progress and get inspired by others</p>
                        </div>
                        <div class="ms-auto">
                            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createPostModal">
                                <i class="fas fa-plus-circle me-1"></i> Create Post
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Feed -->
    <div class="row">
        <!-- Sidebar -->
        <div class="col-md-3 mb-4">
            <div class="card shadow-sm mb-4">
                <div class="card-header">
                    <h5 class="mb-0">Categories</h5>
                </div>
                <div class="card-body p-0">
                    <div class="list-group list-group-flush">
                        <a href="#" class="list-group-item list-group-item-action active">
                            <i class="fas fa-globe me-2"></i> All Posts
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="fas fa-heartbeat me-2"></i> Health & Fitness
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="fas fa-briefcase me-2"></i> Career & Education
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="fas fa-user me-2"></i> Personal Development
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="fas fa-dollar-sign me-2"></i> Financial
                        </a>
                        <a href="#" class="list-group-item list-group-item-action">
                            <i class="fas fa-heart me-2"></i> Relationships
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="card shadow-sm">
                <div class="card-header">
                    <h5 class="mb-0">Top Achievers</h5>
                </div>
                <div class="card-body p-0">
                    <div class="list-group list-group-flush">
                        <a href="#" class="list-group-item list-group-item-action d-flex align-items-center">
                            <div class="avatar me-3 bg-primary text-white">J</div>
                            <div>
                                <h6 class="mb-0">John Doe</h6>
                                <small class="text-muted">12 goals completed</small>
                            </div>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex align-items-center">
                            <div class="avatar me-3 bg-success text-white">S</div>
                            <div>
                                <h6 class="mb-0">Sarah Smith</h6>
                                <small class="text-muted">9 goals completed</small>
                            </div>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex align-items-center">
                            <div class="avatar me-3 bg-info text-white">M</div>
                            <div>
                                <h6 class="mb-0">Mike Johnson</h6>
                                <small class="text-muted">7 goals completed</small>
                            </div>
                        </a>
                        <a href="#" class="list-group-item list-group-item-action d-flex align-items-center">
                            <div class="avatar me-3 bg-danger text-white">L</div>
                            <div>
                                <h6 class="mb-0">Lisa Wong</h6>
                                <small class="text-muted">6 goals completed</small>
                            </div>
                        </a>
                    </div>
                </div>
                <div class="card-footer bg-light p-3">
                    <a href="/goals/leaderboard" class="text-decoration-none d-block text-center">
                        View Full Leaderboard <i class="fas fa-arrow-right ms-1"></i>
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Main Feed -->
        <div class="col-md-9">
            <!-- Social Posts -->
            <div class="posts-container">
                <!-- Post 1 -->
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-white">
                        <div class="d-flex align-items-center">
                            <div class="avatar me-3 bg-primary text-white">J</div>
                            <div>
                                <h6 class="mb-0">John Doe</h6>
                                <small class="text-muted">3 hours ago 路 Health & Fitness</small>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">Hit my weight loss milestone! </h5>
                        <p class="card-text">After 3 months of consistent workouts and clean eating, I've finally reached my first milestone of losing 10kg! So proud of my progress so far.</p>
                        <div class="goal-progress-container mb-3">
                            <div class="d-flex justify-content-between">
                                <span>Goal Progress: Weight Loss Challenge</span>
                                <span>50%</span>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar bg-success" role="progressbar" style="width: 50%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                        <div class="post-image mb-3">
                            <img src="https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80" class="img-fluid rounded" alt="Progress Photo">
                        </div>
                    </div>
                    <div class="card-footer bg-white">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <button class="btn btn-sm btn-outline-primary me-2">
                                    <i class="fas fa-thumbs-up me-1"></i> Like (24)
                                </button>
                                <button class="btn btn-sm btn-outline-secondary">
                                    <i class="fas fa-comment me-1"></i> Comment
                                </button>
                            </div>
                            <button class="btn btn-sm btn-outline-info">
                                <i class="fas fa-share me-1"></i> Share
                            </button>
                        </div>
                        
                        <!-- Comments Section -->
                        <div class="comments-section mt-3">
                            <div class="d-flex comment mb-2">
                                <div class="avatar me-2 bg-success text-white">S</div>
                                <div class="comment-content">
                                    <div class="comment-bubble p-2 bg-light rounded">
                                        <h6 class="mb-0 small">Sarah Smith</h6>
                                        <p class="small mb-0">Amazing progress! What's been your favorite workout routine?</p>
                                    </div>
                                    <div class="comment-actions">
                                        <small class="text-muted">2 hours ago 路 </small>
                                        <small class="text-primary">Reply</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-flex comment mb-2">
                                <div class="avatar me-2 bg-primary text-white">J</div>
                                <div class="comment-content">
                                    <div class="comment-bubble p-2 bg-light rounded">
                                        <h6 class="mb-0 small">John Doe</h6>
                                        <p class="small mb-0">Thanks! I've been doing HIIT workouts 3 times a week and strength training twice a week. It's been challenging but so worth it!</p>
                                    </div>
                                    <div class="comment-actions">
                                        <small class="text-muted">1 hour ago 路 </small>
                                        <small class="text-primary">Reply</small>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Add Comment Form -->
                            <div class="d-flex mt-3">
                                <div class="avatar me-2 bg-info text-white">Y</div>
                                <div class="flex-grow-1">
                                    <input type="text" class="form-control form-control-sm" placeholder="Write a comment...">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Post 2 -->
                <div class="card shadow-sm mb-4">
                    <div class="card-header bg-white">
                        <div class="d-flex align-items-center">
                            <div class="avatar me-3 bg-danger text-white">L</div>
                            <div>
                                <h6 class="mb-0">Lisa Wong</h6>
                                <small class="text-muted">1 day ago 路 Career & Education</small>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title">Just passed my final certification exam! </h5>
                        <p class="card-text">After 6 months of studying, I finally earned my full-stack developer certification! So grateful for this community that kept me motivated through the late nights of studying!</p>
                        <div class="goal-progress-container mb-3">
                            <div class="d-flex justify-content-between">
                                <span>Goal Progress: Career Advancement</span>
                                <span>100%</span>
                            </div>
                            <div class="progress" style="height: 8px;">
                                <div class="progress-bar bg-success" role="progressbar" style="width: 100%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                        </div>
                        <div class="post-image mb-3">
                            <img src="https://images.unsplash.com/photo-1565688534245-05d6df1a55d2?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80" class="img-fluid rounded" alt="Certification">
                        </div>
                    </div>
                    <div class="card-footer bg-white">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <button class="btn btn-sm btn-outline-primary me-2">
                                    <i class="fas fa-thumbs-up me-1"></i> Like (42)
                                </button>
                                <button class="btn btn-sm btn-outline-secondary">
                                    <i class="fas fa-comment me-1"></i> Comment
                                </button>
                            </div>
                            <button class="btn btn-sm btn-outline-info">
                                <i class="fas fa-share me-1"></i> Share
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Create Post Modal -->
<div class="modal fade" id="createPostModal" tabindex="-1" aria-labelledby="createPostModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createPostModalLabel">Share Your Progress</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="postTitle" class="form-label">Title</label>
                        <input type="text" class="form-control" id="postTitle" placeholder="What's your achievement?">
                    </div>
                    <div class="mb-3">
                        <label for="postContent" class="form-label">Description</label>
                        <textarea class="form-control" id="postContent" rows="3" placeholder="Tell us about your progress..."></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="postGoal" class="form-label">Associated Goal</label>
                        <select class="form-select" id="postGoal">
                            <option value="">Select a goal (optional)</option>
                            <option value="1">Weight Loss Challenge</option>
                            <option value="2">Learn Spanish</option>
                            <option value="3">Career Advancement</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="postCategory" class="form-label">Category</label>
                        <select class="form-select" id="postCategory" required>
                            <option value="">Select a category</option>
                            <option value="health">Health & Fitness</option>
                            <option value="career">Career & Education</option>
                            <option value="personal">Personal Development</option>
                            <option value="finance">Financial</option>
                            <option value="relationships">Relationships</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="postImage" class="form-label">Add Photo (Optional)</label>
                        <input class="form-control" type="file" id="postImage" accept="image/*">
                    </div>
                    <div class="mb-3" id="imagePreviewContainer" style="display: none;">
                        <img id="imagePreview" class="img-fluid rounded" alt="Preview">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="publishPost">Publish</button>
            </div>
        </div>
    </div>
</div>

<style>
.avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
}

.comment .avatar {
    width: 32px;
    height: 32px;
    font-size: 0.8rem;
}

.post-image img {
    max-height: 400px;
    width: auto;
    object-fit: contain;
}

.comment-bubble {
    max-width: calc(100% - 40px);
}

.goal-progress-container {
    background-color: #f8f9fa;
    padding: 10px;
    border-radius: 6px;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Image preview handler
    const postImage = document.getElementById('postImage');
    const imagePreview = document.getElementById('imagePreview');
    const imagePreviewContainer = document.getElementById('imagePreviewContainer');
    
    postImage.addEventListener('change', function(e) {
        if (this.files && this.files[0]) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
                imagePreview.src = e.target.result;
                imagePreviewContainer.style.display = 'block';
            }
            
            reader.readAsDataURL(this.files[0]);
        } else {
            imagePreviewContainer.style.display = 'none';
        }
    });
    
    // Publish post handler
    document.getElementById('publishPost').addEventListener('click', function() {
        const title = document.getElementById('postTitle').value;
        const content = document.getElementById('postContent').value;
        const goalId = document.getElementById('postGoal').value;
        const category = document.getElementById('postCategory').value;
        
        if (!title || !content || !category) {
            alert('Please fill in the required fields');
            return;
        }
        
        // In a real app, you would send this data to the server
        // For now, we'll just show a success message and close the modal
        alert('Your post has been published!');
        
        // Close the modal
        const modal = bootstrap.Modal.getInstance(document.getElementById('createPostModal'));
        modal.hide();
        
        // In a real app, you would refresh the feed or add the new post to the top
    });
});
</script> 